分布式事务架构



分布式下载



MySQL的执行流程

日志系统

数据库要实现的几种特性

**acid** ：

原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability）

强弱一致性

常见的隔离级别

**五种调度**

不可串行化——有环图

主事务、子事务（允许并行执行）（保证主事务1/0）

事务代理（站点间数据一致性要求）

分布式管理系统，

独立封装分解，与本地事务拆分



LVS



分布式容错问题

故障：

* 站点故障（节点故障）
* 分布式故障（节点间故障）

```
分布式事务——子事务
	分布式事务管理器
	本地事务管理器
```







分布式节点的通信协议、角色系统

通信中的各种格式（报文）令牌丢失

两阶段提交协议

故障恢复

幂等性设计

>  **WEB资源或API方法的幂等性**是指一次和多次请求某一个资源应该具有同样的副作用。幂等性是系统的接口对外一种承诺(而不是实现), 承诺只要调用接口成功, 外部多次调用对系统的影响是一致的。幂等性是分布式系统设计中的一个重要概念，对超时处理、系统恢复等具有重要意义。声明为幂等的接口会认为外部调用失败是常态, 并且失败之后必然会有重试。例如，在因网络中断等原因导致请求方未能收到请求返回值的情况下，如果该资源具备幂等性，请求方只需要重新请求即可，而无需担心重复调用会产生错误。实际上，我们常用的HTTP协议的方法是具有幂等性语义要求的，比如：get方法用于获取资源，不应有副作用，因此是幂等的；post方法用于创建资源，每次请求都会产生新的资源，因此不具备幂等性；put方法用于更新资源，是幂等的；delete方法用于删除资源，也是幂等的。

**MySQL的数据同步方法**       

数据库的快照策略：多版本的并发控制，导出关系，可以回滚，只读关系，













开源的分布式系统、企业可能会需要的













